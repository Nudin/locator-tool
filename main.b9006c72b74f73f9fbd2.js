webpackJsonp([1],{109:function(t,e){angular.module("gettext").run(["gettextCatalog",function(t){t.setStrings("de",{'<a ui-sref="select">Select files to geolocate</a> by querying a category or inputting a list of <code>File:</code>s.':'<a ui-sref="select">Dateien zum Georeferenzieren auswählen</a> via Kategorie oder <code>Datei:</code>-Liste.',About:"Über","About locator-tool":"Über locator-tool","Also show geolocated files":"Auch georeferenzierte Dateien anzeigen",Category:"Kategorie",Depth:{Category:"Tiefe"},Discard:"Verwerfen","Edits using locator-tool":"Bearbeitungen mit locator-tool","Failed to save <lt-location></lt-location>!":"<lt-location></lt-location> konnte nicht gespeichert werden!","Fetch files for Category":"Dateien der Kategorie laden","Fetch files for User":"Dateien des Benutzers laden",Files:"Dateien","From the list of files provided, select one and click its location on an interactive map.":"Eine Datei in der Dateiliste auswählen und deren Position durch Klick auf die interaktive Karte auswählen.","Geolocate Category":"Kategorie georeferenzieren","Geolocate User files":"Dateien des Benutzers georeferenzieren","Geolocate files":"Dateien georeferenzieren","Geolocate {{$ctrl.titleList.length}} files":"{{$ctrl.titleList.length}} Dateien georeferenzieren",'Its source code is available on <a href="https://github.com/simon04/locator-tool">GitHub</a> and <a href="https://www.gnu.org/licenses/gpl.html">GPL v3</a> licensed.':'Der Quellcode ist auf <a href="https://github.com/simon04/locator-tool">GitHub</a> verfügbar steht unter der Lizenz <a href="https://www.gnu.org/licenses/gpl.html">GPL v3</a>.',LANGUAGE:"Deutsch","Left click on map to set the location.":"Linksklick auf Karte setzt die Position.","Log in":"Anmelden","Log in using the button on the upper right corner":"Anmelden mittels Button im rechten oberen Eck","Log out":"Abmelden","Logged in as {{$ctrl.user}}":"Angemeldet als {{$ctrl.user}}",Map:"Karte","Press shift and click on map to set the object location.":"Shift-Taste und Klick auf Karte setzt die Objektposition.","Repeat …":"Wiederhole …",Save:"Speichern","Select files to geolocate":"Dateien zum Georeferenzieren auswählen","Show Category on map":"Kategorie auf Karte anzeigen","Show User files on map":"Dateien des Benutzers auf Karte anzeigen","Show {{$ctrl.titleList.length}} files on map":"{{$ctrl.titleList.length}} Dateien auf Karte anzeigen",'This tool has been created by <a href="https://github.com/simon04/">simon04</a>.':'Dieses Werkzeug wurde von <a href="https://github.com/simon04/">simon04</a> entwickelt.','This tool helps to add <lt-location></lt-location> information to images on <a href="https://commons.wikimedia.org/">Wikimedia Commons</a>.':'Dieses Werkzeug hilft <lt-location></lt-location> zu bestehenden Dateien auf <a href="https://commons.wikimedia.org/">Wikimedia Commons</a> hinzuzufügen.',Translate:"Übersetzen","Translate locator-tool on Transifex":"Übersetze locator-tool auf Transifex",Tutorial:"Einführung",Usage:"Verwendung",User:"Benutzer","locator-tool":"locator-tool",'→ <a href="https://commons.wikimedia.org/wiki/Commons:Locator-tool">Commons:Locator-tool</a>':'→ <a href="https://commons.wikimedia.org/wiki/Commons:Locator-tool">Commons:Locator-tool</a>'})}])},110:function(t,e){angular.module("gettext").run(["gettextCatalog",function(t){t.setStrings("fr",{'<a ui-sref="select">Select files to geolocate</a> by querying a category or inputting a list of <code>File:</code>s.':'<a ui-sref="select">Sélectionnez les fichiers à géolocaliser</a> par catégorie ou en entrant une liste de <code>Fichiers:</code>s.',About:"À propos","About locator-tool":"À propos du locator-tool","Also show geolocated files":"Afficher aussi les fichiers géolocalisés",Category:"Catégorie",Depth:{Category:"Profondeur"},Discard:"Effacer","Edits using locator-tool":"Modifications utilisant locator-tool","Failed to save <lt-location></lt-location>!":"Impossible de sauvegarder <lt-location></lt-location> !","Fetch files for Category":"Récupérer par catégorie","Fetch files for User":"Récupérer par utilisateur",Files:"Fichiers","From the list of files provided, select one and click its location on an interactive map.":"Sélectionnez un fichier dans la liste, et cliquez sur son emplacement sur la carte.","Geolocate files":"Géolocaliser les fichiers","Geolocate {{$ctrl.titleList.length}} files":"Géolocaliser {{$ctrl.titleList.length}} fichiers",'Its source code is available on <a href="https://github.com/simon04/locator-tool">GitHub</a> and <a href="https://www.gnu.org/licenses/gpl.html">GPL v3</a> licensed.':'Le code source est sous licence <a href="https://www.gnu.org/licenses/gpl.html">GPL v3</a> et disponible sur <a href="https://github.com/simon04/locator-tool">GitHub</a>.',LANGUAGE:"Français","Left click on map to set the location.":"Clic-gauche sur la carte pour définir l'emplacement","Log in":"Se connecter","Log in using the button on the upper right corner":"Identifiez-vous en utilisant le bouton en haut à droite","Log out":"Se déconnecter","Logged in as {{$ctrl.user}}":"Identifié en tant que {{$ctrl.user}}","Press shift and click on map to set the object location.":"Majuscule+clic gauche sur la carte pour définir l'emplacement","Repeat …":"Répéter…",Save:"Enregistrer","Select files to geolocate":"Sélection des fichiers à géolocaliser",'This tool has been created by <a href="https://github.com/simon04/">simon04</a>.':'Cet outil a été créé par <a href="https://github.com/simon04/">simon04</a>.','This tool helps to add <lt-location></lt-location> information to images on <a href="https://commons.wikimedia.org/">Wikimedia Commons</a>.':"Cet outil permet d'ajouter l'information <lt-location></lt-location> aux images présentes sur <a href=\"https://commons.wikimedia.org/\">Wikimedia Commons</a>.",Translate:"Traduire","Translate locator-tool on Transifex":"Traduire le locator-tool sur Transifex",Tutorial:"Didacticiel",Usage:"Utilisation",User:"Utilisateur","locator-tool":"locator-tool",'→ <a href="https://commons.wikimedia.org/wiki/Commons:Locator-tool">Commons:Locator-tool</a>':'→ <a href="https://commons.wikimedia.org/wiki/Commons:Locator-tool">Commons:Locator-tool</a>'})}])},128:function(t,e,a){"use strict";function o(t,e,a,o){function n(t){return i.a.isString(t)&&(t=t.split("|")),t.length>h?r(t):d({prop:"coordinates|imageinfo",titles:t.join("|"),iiprop:"url|extmetadata",iiurlwidth:1024,iiextmetadatafilter:"ImageDescription"}).then(function(t){var o=t.data&&t.data.query&&t.data.query.pages||{},n=e("imageinfo[0].extmetadata.ImageDescription.value"),i=e("imageinfo[0].thumburl"),r=e("imageinfo[0].descriptionurl"),s=e("{lat: coordinates[0].lat, lng: coordinates[0].lon}");return Object.keys(o).map(function(t){var e=o[t];return{pageid:parseInt(t),file:e.title,description:a.trustAsHtml(n(e)),thumbnail:i(e),url:r(e),coordinates:new l.a("Location",s(e)),objectLocation:new l.a("Object location",{})}})})}function r(t){function e(t){return t.reduce(function(t,e){return t.concat(e)},[])}for(var a=Object.assign([],t),i=[];a.length;)i.push(a.splice(0,Math.min(h,a.length)));var l=i.map(n);return o.all(l).then(e)}function s(t){return d({prop:"revisions",pageids:t,rvprop:"content"}).then(function(e){try{var a,o,n=e.data.query.pages[t].revisions[0]["*"],i=n.match(/\{\{Object location( dec)?\|([0-9]+)\|([0-9]+)\|([0-9.]+)\|([NS])\|([0-9]+)\|([0-9]+)\|([0-9.]+)\|([WE])/),r=n.match(/\{\{Object location( dec)?\s*\|\s*([0-9.]+)\s*\|\s*([0-9.]+)/);return i?(a=parseInt(i[2])+parseInt(i[3])/60+parseFloat(i[4])/3600,a*="N"===i[5]?1:-1,o=parseInt(i[6])+parseInt(i[7])/60+parseFloat(i[8])/3600,o*="E"===i[9]?1:-1):r&&(a=parseFloat(r[2]),o=parseFloat(r[3])),new l.a("Object location",{lat:a,lng:o})}catch(t){return new l.a("Object location",{})}})}function c(t){return d({list:"allpages",apnamespace:14,aplimit:30,apfrom:t,apprefix:t}).then(function(t){return t.data.query.allpages.map(function(t){return t.title.replace(/^Category:/,"")})})}function p(t){var e=t.files,a=t.user,n=t.category,i=t.categoryDepth;return o(function(t,o){e?t(e):a?g(a).then(t):n?u(n,i).then(t):o()})}function g(t){return d({list:"usercontribs",ucuser:t,ucnamespace:6,ucshow:"new",uclimit:"max",ucprop:"title"}).then(function(t){return t.data.query.usercontribs.map(function(t){return t.title})})}function u(e,a){void 0===a&&(a=3),e=e.replace(/^Category:/,"");var o={language:"commons",project:"wikimedia",categories:e,negcats:"Location_not_applicable","ns[6]":1,depth:a,output_compatability:"catscan",sparse:"on",sortby:"title",format:"json",doit:1};return t.get("https://petscan.wmflabs.org/",{params:o}).then(function(t){return t.data["*"][0].a["*"]})}function d(e){return e=Object.assign({action:"query",format:"json",callback:"JSON_CALLBACK"},e),t.jsonp("https://commons.wikimedia.org/w/api.php",{params:e})}var h=10;return{getCoordinates:n,getCategoriesForPrefix:c,getObjectLocation:s,getFiles:p,getFilesForUser:g,getFilesForCategory:u}}e.a=o;var n=a(5),i=a.n(n),l=a(68);o.$inject=["$http","$parse","$sce","$q"]},129:function(t,e,a){"use strict";function o(t){function e(){return t.get("/locator-tool/user").then(function(t){return t.data&&t.data.user})}function a(e,a){var o=e.pageid,n=a.type,i=a.lat,l=a.lng;return t({method:"POST",url:"/locator-tool/edit",data:{type:n,lat:i,lng:l,pageid:o}}).then(function(t){var e=t.data;if(!e.result||!e.result.edit||"Success"!==e.result.edit.result)throw e})}return{getUserInfo:e,editLocation:a}}e.a=o,o.$inject=["$http"]},130:function(t,e,a){"use strict";var o=a(171);e.a={template:o.a}},131:function(t,e,a){"use strict";var o=a(69),n=a(172),i={lat:51.505,lng:-.09,zoom:13},l=function(t,e,a){var o=this;this.mapView=a.get("mapView")||i,t.getFiles(e).then(t.getCoordinates).then(function(t){o.titles=t;var e=t.map(function(t){return t.coordinates}).filter(function(t){return t.isDefined});e.length&&(o.bounds=e)})};l.prototype.mapInit=function(t,e){new o.a.controller._mapInit(t,e)},l.$inject=["ltData","$stateParams","localStorageService"],e.a={template:n.a,controller:l}},132:function(t,e,a){"use strict";var o=a(173),n=function(t){Object.assign(this,{ltDataAuth:t})};n.prototype.editLocation=function(t,e){var a=this;return this.error=void 0,this.ltDataAuth.editLocation(t,e).then(function(){e.markAsSaved()},function(t){a.error=t})},n.$inject=["ltDataAuth"],e.a={bindings:{title:"<"},controller:n,template:o.a}},133:function(t,e,a){"use strict";var o=a(174),n=function(t,e,a){Object.assign(this,{ltData:t,$state:e,categoryDepth:void 0!==a.categoryDepth?parseInt(a.categoryDepth):3,titles:""}),a.user?(this.user=a.user,this.getFilesForUser()):a.category&&(this.category=a.category,this.getFilesForCategory())},i={titleList:{}};n.prototype.getCategoriesForPrefix=function(){var t=this;this.ltData.getCategoriesForPrefix(this.category).then(function(e){t.categorySuggestions=e})},n.prototype.getFilesForUser=function(){var t=this;this.$state.go(".",{user:this.user,category:void 0},{replace:!0}),this.getFilesForUser$q=this.ltData.getFilesForUser(this.user).then(function(e){t.titleList=e})},n.prototype.getFilesForCategory=function(){var t=this;this.$state.go(".",{category:this.category,user:void 0},{replace:!0}),this.getFilesForCategory$q=this.ltData.getFilesForCategory(this.category,this.categoryDepth).then(function(e){t.titleList=e})},n.prototype.next=function(t){void 0===t&&(t="geolocate");var e=this.titleList.join("|");this.$state.go(t,{files:e})},n.prototype.nextForUser=function(t){void 0===t&&(t="geolocate");var e=this.user;this.$state.go(t,{user:e})},n.prototype.nextForCategory=function(t){void 0===t&&(t="geolocate");var e=this.category;this.$state.go(t,{category:e})},i.titleList.get=function(){return this.titles.split("\n").map(function(t){return t&&t.split("|")[0]}).filter(function(t){return t})},i.titleList.set=function(t){this.titles=t&&t.join("\n")},Object.defineProperties(n.prototype,i),n.$inject=["ltData","$state","$stateParams"],e.a={template:o.a,controller:n}},134:function(t,e,a){"use strict";var o=a(175),n=a(109),i=(a.n(n),a(110)),l=(a.n(i),function(t,e,a,o){var n=this;Object.assign(this,{$window:t,localStorageService:e,gettext:a,gettextCatalog:o}),this.languages={de:this.getDisplayString("de"),en:"English",fr:this.getDisplayString("fr")};var i=e.get("language");if(i)o.setCurrentLanguage(i);else if(t.navigator&&t.navigator.languages){var l=t.navigator.languages.filter(function(t){return n.languages[t]});l.length&&o.setCurrentLanguage(l[0])}}),r={language:{}};r.language.get=function(){return this.gettextCatalog.getCurrentLanguage()},r.language.set=function(t){this.localStorageService.set("language",t),this.gettextCatalog.setCurrentLanguage(t)},l.prototype.getDisplayString=function(t){var e=this.gettext("LANGUAGE");return this.gettextCatalog.getStringFormFor(t,e,1)||t},Object.defineProperties(l.prototype,r),l.$inject=["$window","localStorageService","gettext","gettextCatalog"],e.a={template:o.a,controller:l}},135:function(t,e,a){"use strict";var o=a(176);e.a={bindings:{type:"@",latLng:"<"},template:o.a}},136:function(t,e,a){"use strict";var o=a(177),n=function(t){this.$scope=t};n.prototype.fireChanged=function(t){this.$scope.$emit("coordinatesChanged",t)},n.$inject=["$scope"],e.a={bindings:{latLng:"<",editLocation:"&"},controller:n,template:o.a}},137:function(t,e,a){"use strict";var o=a(178),n={lat:51.505,lng:-.09,zoom:13},i=function(t,e,a,o,i,l,r){var s=this;Object.assign(this,{ltData:t,ltDataAuth:o,localStorageService:r}),this.mapView=r.get("mapView")||n;var c=t.getFiles(a),p=c.then(t.getCoordinates).then(function(t){s.titles=i("orderBy")(t,"file"),s.showGeolocated=s.titles.length<=5,s.title=s.titles.filter(function(t){return s.showGeolocated||!t.coordinates.lat})[0]});this.loading$q=l.all([c,p]),e.$watch("$ctrl.title",function(t){return s.titleChanged(t)}),e.$watch("$ctrl.mapView",function(t){return s.mapViewChanged(t)},!0),e.$on("coordinatesChanged",function(t,e){return s.coordinatesChanged(e)})},l={titlesDefinedAndSaved:{},titlesDefinedAndSavedPercent:{}};l.titlesDefinedAndSaved.get=function(){return this.titles&&this.titles.filter(function(t){return t.coordinates.isDefinedAndSaved})||[]},l.titlesDefinedAndSavedPercent.get=function(){return 100*this.titlesDefinedAndSaved.length/(this.titles||[]).length},i.prototype.titleChanged=function(t){var e=this;this.error=void 0,t&&t.coordinates&&this.updateMapView(t.coordinates),t&&t.pageid&&this.ltData.getObjectLocation(t.pageid).then(function(a){var o=a.lat,n=a.lng;t.objectLocation=a,t.coordinates&&t.coordinates.lat||e.updateMapView({lat:o,lng:n})})},i.prototype.mapViewChanged=function(t){this.localStorageService.set("mapView",t)},i.prototype.updateMapView=function(t){var e=t.lat,a=t.lng;e&&a&&Object.assign(this.mapView,{lat:e,lng:a})},i.prototype.coordinatesChanged=function(t){t&&("Location"===t.type?this.title.coordinates=this.title.coordinates.withLatLng(t):"Object location"===t.type&&(this.title.objectLocation=this.title.objectLocation.withLatLng(t)))},Object.defineProperties(i.prototype,l),i.$inject=["ltData","$scope","$stateParams","ltDataAuth","$filter","$q","localStorageService"],e.a={template:o.a,controller:i}},138:function(t,e,a){"use strict";var o=a(180),n=function(t){var e=this;this.params=void 0,t.onSuccess({},function(t){e.params=t.params()})},i={activateLinks:{}};i.activateLinks.get=function(){return this.params&&(this.params.files||this.params.user||this.params.category)},Object.defineProperties(n.prototype,i),n.$inject=["$transitions"],e.a={controller:n,template:o.a}},139:function(t,e,a){"use strict";var o=a(169);a.n(o);e.a={template:'\n  <div class="spinner">\n    <div class="bounce1"></div>\n    <div class="bounce2"></div>\n    <div class="bounce3"></div>\n  </div>'}},140:function(t,e,a){"use strict";var o=a(181),n=function(t){var e=this;t.getUserInfo().then(function(t){e.user=t})};n.$inject=["ltDataAuth"],e.a={template:o.a,controller:n}},141:function(t,e,a){"use strict";function o(){var t=/([+-]?\d+\.\d*)[,;\s]+([+-]?\d+\.\d*)/;return{require:"ngModel",link:function(e,a,o,i){function l(e){s||(s=i.$modelValue&&i.$modelValue.type);var a=e.match(t);return i.$setValidity("coordinate",a||i.$isEmpty(e)),a||i.$isEmpty(e)?new n.a(s,{lat:a?parseFloat(a[1]):void 0,lng:a?parseFloat(a[2]):void 0}):void 0}function r(t){return t&&t.csv}var s;i.$parsers.push(l),i.$formatters.push(r)}}}e.a=o;var n=a(68)},142:function(t,e,a){"use strict";function o(t,e){t.state("about",{url:"/",component:"ltAbout"}),t.state("select",{url:"/select?user&category&categoryDepth",component:"ltFilesSelector"}),t.state("geolocate",{url:"/geolocate?files&user&category&categoryDepth",component:"ltMain"}),t.state("map",{url:"/map?files&user&category&categoryDepth",component:"ltAllMap"}),e.otherwise("/")}Object.defineProperty(e,"__esModule",{value:!0});var n=a(5),i=a.n(n),l=a(26),r=a.n(l),s=a(27),c=a.n(s),p=a(25),g=a.n(p),u=a(80),d=(a.n(u),a(77)),h=a(78);i.a.module("app",[c.a,r.a,g.a,d.a,h.a]),i.a.module("app").config(o),o.$inject=["$stateProvider","$urlRouterProvider"],i.a.element(document).ready(function(){i.a.bootstrap(document,["app"],{strictDi:!0})})},169:function(t,e){},171:function(t,e,a){"use strict";e.a='<h1><span class="glyphicon glyphicon-map-marker"></span><span translate="translate">locator-tool</span></h1><p translate="translate">This tool helps to add <lt-location></lt-location> information to images on <a href="https://commons.wikimedia.org/">Wikimedia Commons</a>.</p><h2 translate="translate">Usage</h2><ol><li translate="translate">Log in using the button on the upper right corner</li><li translate="translate"><a ui-sref="select">Select files to geolocate</a> by querying a category or inputting a list of <code>File:</code>s.</li><li translate="translate">From the list of files provided, select one and click its location on an interactive map.</li><li translate="translate">Repeat …</li></ol><h2 translate="translate">Tutorial</h2><p translate="translate">→ <a href="https://commons.wikimedia.org/wiki/Commons:Locator-tool">Commons:Locator-tool</a></p><h2 translate="translate">Edits using locator-tool</h2><p>→ <a href="https://commons.wikimedia.org/w/index.php?title=Special:RecentChanges&tagfilter=OAuth+CID%3A+496">Edits using locator-tool</a></p><h2 translate="translate">Translate</h2><p>→ <a href="https://www.transifex.com/locator-tool/locator-tool/" translate>Translate locator-tool on Transifex</a></p><h2 translate="translate">About</h2><p><span translate="translate">This tool has been created by <a href="https://github.com/simon04/">simon04</a>.</span><span translate="translate">Its source code is available on <a href="https://github.com/simon04/locator-tool">GitHub</a> and <a href="https://www.gnu.org/licenses/gpl.html">GPL v3</a> licensed.</span></p>'},172:function(t,e,a){"use strict";e.a='<div class="fill" ll-map="" ll-init="$ctrl.mapInit"><ll-view ll-view="$ctrl.mapView"></ll-view><ll-fit-bounds ll-bounds="$ctrl.bounds"></ll-fit-bounds><ll-marker ng-repeat="title in $ctrl.titles" ng-if="title.coordinates.lat" ll-lat-lng="title.coordinates" ll-popupopen="title._popup = 1" ng-title="{{title}}"><ll-popup><div style="width: 300px;"><p><a href="{{title.url}}" target="_blank">{{title.file}}</a></p><img ng-if="title._popup" ng-src="{{title.thumbnail}}" style="width: 100%;"/></div></ll-popup></ll-marker></div>'},173:function(t,e,a){"use strict";e.a='<h2>{{$ctrl.title.file}}<small><a href="{{$ctrl.title.url}}" target="_blank"><span class="glyphicon glyphicon-new-window"></span></a></small></h2><div class="well well-sm" ng-bind-html="$ctrl.title.description"></div><div class="form-group"><label><lt-location type="{{$ctrl.title.coordinates.type}}"></lt-location></label><lt-location-input lat-lng="$ctrl.title.coordinates" edit-location="$ctrl.editLocation($ctrl.title, $ctrl.title.coordinates)"></lt-location-input><p class="help-block" translate="translate">Left click on map to set the location.</p></div><div class="form-group"><label><lt-location type="{{$ctrl.title.objectLocation.type}}"></lt-location></label><lt-location-input lat-lng="$ctrl.title.objectLocation" edit-location="$ctrl.editLocation($ctrl.title, $ctrl.title.objectLocation)"></lt-location-input><p class="help-block" translate="translate">Press shift and click on map to set the object location.</p></div><div class="alert alert-danger" ng-if="$ctrl.error"><span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span><span translate="translate">Failed to save <lt-location></lt-location>!</span></div>'},174:function(t,e,a){"use strict";e.a='<form class="form-group" name="formUser" ng-submit="$ctrl.nextForUser()"><label for="inputUser" translate="translate">User</label><input class="form-control" id="inputUser" ng-model="$ctrl.user" placeholder="User:…"/><input class="hidden" type="submit" ng-disabled="!$ctrl.user"/><button class="btn btn-primary" ng-click="$ctrl.nextForUser()" ng-disabled="!$ctrl.user"><span class="glyphicon glyphicon-map-marker"></span><span translate="translate">Geolocate User files</span></button><button class="btn btn-default" ng-click="$ctrl.getFilesForUser()" ng-disabled="!$ctrl.user"><span class="glyphicon glyphicon-circle-arrow-down"></span><span translate="translate">Fetch files for User</span></button><button class="btn btn-default" ng-click="$ctrl.nextForUser(\'map\')" ng-disabled="!$ctrl.user"><span class="glyphicon glyphicon-globe"></span><span translate="translate">Show User files on map</span></button><lt-spinner ng-if="$ctrl.getFilesForUser$q &amp;&amp; !$ctrl.getFilesForUser$q.$$state.status" style="display: inline-block;"></lt-spinner></form><form class="form-group" name="formCategory" ng-submit="$ctrl.nextForCategory()"><div class="row"><div class="col-md-10"><label for="inputCategory" translate="translate">Category</label><input class="form-control" id="inputCategory" list="datalistCategory" ng-model="$ctrl.category" ng-model-options="{updateOn: \'default blur\', debounce: {default: 500, change: 0, blur: 0}}" ng-change="$ctrl.getCategoriesForPrefix()" placeholder="Category:…"/></div><div class="col-md-2"><label for="inputCategoryDepth" translate-comment="Depth of category tree" translate-context="Category" translate="translate">Depth</label><input class="form-control" id="inputCategoryDepth" type="number" ng-model="$ctrl.categoryDepth"/></div></div><input class="hidden" type="submit" ng-disabled="!$ctrl.category"/><button class="btn btn-primary" ng-click="$ctrl.nextForCategory()" ng-disabled="!$ctrl.category"><span class="glyphicon glyphicon-map-marker"></span><span translate="translate">Geolocate Category</span></button><button class="btn btn-default" ng-click="$ctrl.getFilesForCategory()" ng-disabled="!$ctrl.category"><span class="glyphicon glyphicon-circle-arrow-down"></span><span translate="translate">Fetch files for Category</span></button><button class="btn btn-default" ng-click="$ctrl.nextForCategory(\'map\')" ng-disabled="!$ctrl.category"><span class="glyphicon glyphicon-globe"></span><span translate="translate">Show Category on map</span></button><lt-spinner ng-if="$ctrl.getFilesForCategory$q &amp;&amp; !$ctrl.getFilesForCategory$q.$$state.status" style="display: inline-block;"></lt-spinner><datalist id="datalistCategory"><option ng-repeat="i in $ctrl.categorySuggestions" ng-value="i"></option></datalist></form><form class="form-group" name="formTitles"><label for="inputTitles" translate="translate">Files</label><textarea class="form-control" id="inputTitles" rows="10" ng-model="$ctrl.titles" placeholder="File:…"></textarea><button class="btn btn-primary" ng-disabled="!$ctrl.titleList.length" ng-click="$ctrl.next()"><span class="glyphicon glyphicon-map-marker"></span><span translate="translate">Geolocate {{$ctrl.titleList.length}} files</span></button><button class="btn btn-default" ng-disabled="!$ctrl.titleList.length" ng-click="$ctrl.next(\'map\')"><span class="glyphicon glyphicon-map-marker"></span><span translate="translate">Show {{$ctrl.titleList.length}} files on map</span></button></form>'},175:function(t,e,a){"use strict";e.a='<select class="form-control" ng-model="$ctrl.language"><option ng-repeat="(key, label) in $ctrl.languages" value="{{key}}">{{label}}</option></select>'},176:function(t,e,a){"use strict";e.a="<code>{{<span>{{$ctrl.type || 'Location'}}</span><span ng-if=\"$ctrl.latLng\">| {{$ctrl.latLng.lat}} | {{$ctrl.latLng.lng}}</span>}}</code>"},177:function(t,e,a){"use strict";e.a='<div class="input-group" ng-form="coordinatesForm" ng-class="{\'has-error\': !coordinatesForm.$valid}"><input class="form-control" type="text" ng-model="$ctrl.latLng" ng-model-options="{updateOn: \'default blur\', debounce: {default: 2000, blur: 0}}" ng-change="coordinatesForm.$valid &amp;&amp; $ctrl.fireChanged($ctrl.latLng)" smart-coordinate=""/><span class="input-group-btn"><button class="btn btn-default" type="button" ng-click="$ctrl.fireChanged($ctrl.latLng.withLatLng(undefined))" title="{{\'Discard\'|translate}}"><span class="glyphicon glyphicon-remove"></span></button><button class="btn btn-success" type="button" ng-click="$ctrl.editLocation()" title="{{\'Save\'|translate}}" ng-disabled="!$ctrl.latLng.isChanged"><span class="glyphicon glyphicon-save"></span></button></span></div>'},178:function(t,e,a){"use strict";e.a='<div class="row fill"><div class="col-md-3 col-lg-2 fill col-md-h40" style="position:relative;"><div class="progress"><div class="progress-bar" role="progressbar" ng-style="{width: $ctrl.titlesDefinedAndSavedPercent + \'%\'}">{{$ctrl.titlesDefinedAndSaved.length}} / {{$ctrl.titles.length}}</div></div><div class="form-group"><div class="checkbox"><label><input ng-model="$ctrl.showGeolocated" type="checkbox"/><span translate="translate">Also show geolocated files</span></label></div></div><div class="input-group"><span class="input-group-addon"><span class="glyphicon glyphicon-search"></span></span><input class="form-control" ng-model="$ctrl.filter" type="text"/></div><ul class="list-group list-group-files fill-absolute" style="top: 110px;"><li ng-if="$ctrl.loading$q &amp;&amp; !$ctrl.loading$q.$$state.status"><lt-spinner></lt-spinner></li><li class="list-group-item" ng-repeat="title in $ctrl.titles | filter:$ctrl.filter" ng-show="$ctrl.showGeolocated || !title.coordinates.isDefinedAndSaved" ng-click="$ctrl.title = title" ng-class="{\'list-group-item-info\': title === $ctrl.title}"><span class="glyphicon glyphicon-check" ng-show="title.coordinates.isDefinedAndSaved"></span>{{title.file}}</li></ul></div><div class="col-md-9 col-lg-3 fill col-md-h40" ng-if="$ctrl.title" style="overflow-y: auto;"><div class="row"><div class="col-md-5 col-lg-12"><lt-file-details title="$ctrl.title"></lt-file-details></div><div class="col-md-7 col-lg-12"><img class="img-responsive thumbnail" ng-src="{{$ctrl.title.thumbnail}}" style="max-height: 100%;"/></div></div></div><div class="col-md-12 col-lg-7 fill col-md-h60" ng-if="$ctrl.title"><lt-map class="fill" map-view="$ctrl.mapView" map-marker="$ctrl.title.coordinates" map-object-location="$ctrl.title.objectLocation"></lt-map></div></div>'},179:function(t,e,a){"use strict";e.a='<div class="fill" ll-map="" ll-init="$ctrl.mapInit" ll-click="$ctrl.mapClick($event)" ll-baselayerchange="$ctrl.mapLayerChange($event)"><ll-view ll-view="$ctrl.mapView"></ll-view><ll-marker ll-lat-lng="$ctrl.mapMarker" ll-marker="{draggable: true}" ng-if="$ctrl.mapMarker.lat"></ll-marker><ll-marker ll-lat-lng="$ctrl.mapObjectLocation" ng-if="$ctrl.mapObjectLocation.lat"><ll-div-icon><div title="Object location"><span class="glyphicon glyphicon-asterisk" style="color: red;"></span></div></ll-div-icon></ll-marker></div>'},180:function(t,e,a){"use strict";e.a='<nav class="navbar navbar-default"><div class="container-fluid"><div class="navbar-header"><a class="navbar-brand" ui-sref="about"><span class="glyphicon glyphicon-map-marker"></span><span translate="translate">locator-tool</span></a></div><div class="navbar-collapse"><ul class="nav navbar-nav"><li ui-sref-active="active"><a ui-sref="select"><span class="glyphicon glyphicon-check"></span><span translate="translate">Select files to geolocate</span></a></li><li ui-sref-active="active"><a ng-show="$ctrl.activateLinks" ui-sref="geolocate($ctrl.params)"><span class="glyphicon glyphicon-map-marker"></span><span translate="translate">Geolocate files</span></a></li><li ui-sref-active="active"><a ng-show="$ctrl.activateLinks" ui-sref="map($ctrl.params)"><span class="glyphicon glyphicon-globe"></span><span translate="translate">Map</span></a></li><li ui-sref-active="active"><a ui-sref="about"><span translate="translate">About locator-tool</span></a></li></ul><lt-user-info class="navbar-right"></lt-user-info><lt-language-selector class="navbar-form navbar-right"></lt-language-selector></div></div></nav>'},181:function(t,e,a){"use strict";e.a='<a class="btn btn-danger navbar-btn" href="/locator-tool/login?next=/locator-tool/" ng-hide="$ctrl.user" translate="translate">Log in</a><p class="navbar-text" ng-show="$ctrl.user" translate="translate">Logged in as {{$ctrl.user}}</p><a class="btn btn-default navbar-btn" href="/locator-tool/logout?next=/locator-tool/" ng-show="$ctrl.user" translate="translate">Log out</a>'},68:function(t,e,a){"use strict";function o(t){return t%1==0?t.toFixed(1):t}var n=function(t,e){var a=e.lat,o=e.lng;Object.assign(this,{type:t,lat:a,lng:o,_latOriginal:a,_lngOriginal:o})},i={isDefined:{},isChanged:{},isDefinedAndSaved:{},csv:{}};n.prototype.withLatLng=function(t){void 0===t&&(t={});var e=t.lat,a=t.lng,o=new n(this.type,{lat:e,lng:a});return o._latOriginal=this._latOriginal,o._lngOriginal=this._lngOriginal,o},n.prototype.markAsSaved=function(){Object.assign(this,{_latOriginal:this.lat,_lngOriginal:this.lng})},i.isDefined.get=function(){return this.lat&&this.lng},i.isChanged.get=function(){return this.lat!==this._latOriginal||this.lng!==this._lngOriginal},i.isDefinedAndSaved.get=function(){return this.isDefined&&!this.isChanged},i.csv.get=function(){return this.isDefined&&[this.lat,this.lng].map(o).join(", ")},Object.defineProperties(n.prototype,i),e.a=n},69:function(t,e,a){"use strict";function o(t,e){return void 0===e&&(e=1e8),t*e%1?Math.round(t*e)/e:t}var n,i=a(179),l=function(t,e){Object.assign(this,{$scope:t,localStorageService:e}),n=this.localStorageService.get("mapLayer")||"OSM"};l.prototype.mapInit=function(t,e){l._mapInit(t,e)},l._mapInit=function(t,e){var a='<a href="https://www.openstreetmap.org/copyright" target="_blank">\n      OpenStreetMap</a> contributors',o=t.tileLayer("https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}.png",{maxZoom:18,attribution:"Wikimedia maps | Map data &copy; "+a}),i=t.tileLayer("https://tiles.wmflabs.org/osm/{z}/{x}/{y}.png",{maxZoom:18,attribution:a}),l=t.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:a}),r={OSM:l,"OSM @wmflabs.org":i,"Wikimedia maps":o};t.control.layers(r).addTo(e),(r[n]||i).addTo(e),new t.Control.GeoSearch({provider:new t.GeoSearch.Provider.OpenStreetMap,showMarker:!1}).addTo(e)},l.prototype.mapClick=function(t){var e=t.latlng,a=e.lat,n=e.lng,i=t.originalEvent.shiftKey;if(a&&n){var l=i?this.mapObjectLocation:this.mapMarker,r=l.withLatLng({lat:o(a),lng:o(n)});this.$scope.$emit("coordinatesChanged",r)}},l.prototype.mapLayerChange=function(t){this.localStorageService.set("mapLayer",t.name)},l.$inject=["$scope","localStorageService"],e.a={bindings:{mapView:"<",mapMarker:"<",mapObjectLocation:"<"},template:i.a,controller:l}},77:function(t,e,a){"use strict";var o=a(5),n=a.n(o),i=a(128),l=a(129);e.a=n.a.module("app.api",[]).factory("ltData",i.a).factory("ltDataAuth",l.a).name},78:function(t,e,a){"use strict";var o=a(5),n=a.n(o),i=a(40),l=a(130),r=a(131),s=a(132),c=a(133),p=a(134),g=a(135),u=a(136),d=a(137),h=a(69),f=a(138),m=a(139),v=a(140),b=a(141);e.a=n.a.module("app.components",[i.a]).component("ltAbout",l.a).component("ltAllMap",r.a).component("ltFileDetails",s.a).component("ltFilesSelector",c.a).component("ltLanguageSelector",p.a).component("ltLocation",g.a).component("ltLocationInput",u.a).component("ltMain",d.a).component("ltMap",h.a).component("ltNavbar",f.a).component("ltSpinner",m.a).component("ltUserInfo",v.a).directive("smartCoordinate",b.a).name},80:function(t,e){}},[142]);